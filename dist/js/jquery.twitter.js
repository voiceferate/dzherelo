!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(c){c.fn.tweet=function(e){var _=c.extend({modpath:"twitter",username:null,list_id:null,list:null,favorites:!1,query:null,avatar_size:48,count:3,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"search.twitter.com",template:"{text}{time}",comparator:function(e,t){return t.tweet_time-e.tweet_time},filter:function(e){return!0}},e),s=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?��""'']))/gi;function l(e,t){if("string"==typeof e){var r=e;for(var a in t){var n=t[a];r=r.replace(new RegExp("{"+a+"}","g"),null===n?"":n)}return r}return e(t)}function t(t,r){return function(){var e=[];return this.each(function(){e.push(this.replace(t,r))}),c(e)}}function u(e){return e.replace(/</g,"&lt;").replace(/>/g,"^&gt;")}function o(e){var t,r,a,i,n={};return n.item=e,n.source=e.source,n.name=e.from_user_name||e.user.name,n.screen_name=e.from_user||e.user.screen_name,n.avatar_size=_.avatar_size,n.avatar_url=function e(t,r){return r?"user"in t?t.user.profile_image_url_https:e(t,!1).replace(/^http:\/\/[a-z0-9]{1,3}\.twimg\.com\//,"https://s3.amazonaws.com/twitter_production/"):t.profile_image_url||t.user.profile_image_url}(e,"https:"===document.location.protocol),n.retweet=void 0!==e.retweeted_status,n.tweet_time=(t=e.created_at,Date.parse(t.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"))),n.join_text="auto"==_.join_text?(r=e.text).match(/^(@([A-Za-z0-9-_]+)) .*/i)?_.auto_join_text_reply:r.match(s)?_.auto_join_text_url:r.match(/^((\w+ed)|just) .*/im)?_.auto_join_text_ed:r.match(/^(\w*ing) .*/i)?_.auto_join_text_ing:_.auto_join_text_default:_.join_text,n.tweet_id=e.id_str,n.twitter_base="http://"+_.twitter_url+"/",n.user_url=n.twitter_base+n.screen_name,n.tweet_url=n.user_url+"/status/"+n.tweet_id,n.reply_url=n.twitter_base+"intent/tweet?in_reply_to="+n.tweet_id,n.retweet_url=n.twitter_base+"intent/retweet?tweet_id="+n.tweet_id,n.favorite_url=n.twitter_base+"intent/favorite?tweet_id="+n.tweet_id,n.retweeted_screen_name=n.retweet&&e.retweeted_status.user.screen_name,n.tweet_relative_time=function(e){var t=1<arguments.length?arguments[1]:new Date,r=parseInt((t.getTime()-e)/1e3,10);return r<1?"just now":r<60?r+" seconds ago":r<120?"a minute ago":r<2700?+parseInt(r/60,10).toString()+" minutes ago":r<7200?"an hour ago":r<86400?+parseInt(r/3600,10).toString()+" hours ago":r<172800?"a day ago":+parseInt(r/86400,10).toString()+" days ago"}(n.tweet_time),n.entities=e.entities?(e.entities.urls||[]).concat(e.entities.media||[]):[],n.tweet_raw_text=n.retweet?"RT @"+n.retweeted_screen_name+" "+e.retweeted_status.text:e.text,n.tweet_text=c([(a=n.tweet_raw_text,i=n.entities,a.replace(s,function(e){for(var t=/^[a-z]+:/i.test(e)?e:"http://"+e,r=e,a=0;a<i.length;++a){var n=i[a];if(n.url==t&&n.expanded_url){t=n.expanded_url,r=n.display_url;break}}return'<a href="'+u(t)+'">'+u(r)+"</a>"}))]).linkUser().linkHash()[0],n.tweet_text_fancy=c([n.tweet_text]).makeHeart()[0],n.user=l('<a href="{user_url}" class="tweet_user">{screen_name}</a></br>',n),n.join=_.join_text?l(' <span class="tweet_join">{join_text}</span> ',n):" ",n.avatar=n.avatar_size?l('<a class="tweet_avatar" href="{user_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/></a>',n):"",n.time=l('<span class="tweet_time"><a href="{tweet_url}" title="">{tweet_relative_time}</a></span>',n),n.text=l('<span class="tweet_text">{tweet_text_fancy}</span>',n),n.follow_btn=l('<a class="follow_btn" href="{user_url}">Follow Us</a></br>',n),n.reply_action=l('<a class="tweet_action tweet_reply" href="{reply_url}">reply</a>',n),n.retweet_action=l('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet</a>',n),n.favorite_action=l('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite</a>',n),n}return c.extend({tweet:{t:l}}),c.fn.extend({linkUser:t(/(^|[\W])@(\w+)/gi,'$1<span class="at">@</span><a href="http://'+_.twitter_url+'/$2">$2</a>'),linkHash:t(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="http://'+_.twitter_search_url+"/search?q=&tag=$1&lang=all"+(_.username&&1==_.username.length&&!_.list?"&from="+_.username.join("%2BOR%2B"):"")+'" class="tweet_hashtag">#$1</a>'),makeHeart:t(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;</tt>")}),this.each(function(e,n){var i=c('<ul class="tweet_list slides">'),s='<p class="tweet_intro">'+_.intro_text+"</p>",u='<p class="tweet_outro">'+_.outro_text+"</p>",t=c('<p class="loading">'+_.loading_text+"</p>");_.username&&"string"==typeof _.username&&(_.username=[_.username]),c(n).unbind("tweet:load").bind("tweet:load",function(){_.loading_text&&c(n).empty().append(t),c.ajax({dataType:"json",type:"post",async:!1,url:_.modpath||"/twitter/",data:{request:function(){_.modpath;var e=null===_.fetch?_.count:_.fetch,t={include_entities:1};if(_.list)return{host:_.twitter_api_url,url:"/1.1/lists/statuses.json",parameters:c.extend({},t,{list_id:_.list_id,slug:_.list,owner_screen_name:_.username,page:_.page,count:e,include_rts:_.retweets?1:0})};if(_.favorites)return{host:_.twitter_api_url,url:"/1.1/favorites/list.json",parameters:c.extend({},t,{list_id:_.list_id,screen_name:_.username,page:_.page,count:e})};if(null===_.query&&1===_.username.length)return{host:_.twitter_api_url,url:"/1.1/statuses/user_timeline.json",parameters:c.extend({},t,{screen_name:_.username,page:_.page,count:e,include_rts:_.retweets?1:0})};var r=_.query||"from:"+_.username.join(" OR from:");return{host:_.twitter_search_url,url:"/search.json",parameters:c.extend({},t,{page:_.page,q:r,rpp:e})}}()},success:function(e,t){e.message&&console.log(e.message);var r=e.response;c(n).empty().append(i),_.intro_text&&i.before(s),i.empty(),void 0!==r.statuses?resp=r.statuses:void 0!==r.results?resp=r.results:resp=r;var a=c.map(resp,o);a=c.grep(a,_.filter).sort(_.comparator).slice(0,_.count),i.append(c.map(a,function(e){return"<li>"+l(_.template,e)+"</li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd"),_.outro_text&&i.after(u),c(n).trigger("loaded").trigger(a?"empty":"full"),_.refresh_interval&&window.setTimeout(function(){c(n).trigger("tweet:load")},1e3*_.refresh_interval)}})}).trigger("tweet:load")})}});